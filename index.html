<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Secret Message with Emoji Output</title>
<style>
  :root {
    --bg-light: #f0f4f8;
    --bg-dark: #121212;
    --color-light: #333;
    --color-dark: #eee;
    --primary-light: #3498db;
    --primary-dark: #2980b9;
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: var(--bg-light);
    color: var(--color-light);
    margin: 0; padding: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    transition: background-color 0.3s, color 0.3s;
  }
  body.dark {
    background: var(--bg-dark);
    color: var(--color-dark);
  }
  .container {
    background: white;
    max-width: 520px;
    width: 100%;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    text-align: center;
    transition: background-color 0.3s, color 0.3s;
  }
  body.dark .container {
    background: #1e1e1e;
    color: var(--color-dark);
    box-shadow: 0 10px 20px rgba(255,255,255,0.1);
  }
  h2 {
    margin-bottom: 20px;
  }
  label {
    display: block;
    margin: 12px 0 6px;
    font-weight: 600;
    text-align: left;
  }
  select, textarea, input[type="password"] {
    width: 100%;
    padding: 10px 12px;
    font-size: 1rem;
    border-radius: 8px;
    border: 1.5px solid #ccc;
    box-sizing: border-box;
    transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;
  }
  body.dark select, body.dark textarea, body.dark input[type="password"] {
    background: #333;
    color: var(--color-dark);
    border-color: #555;
  }
  textarea {
    resize: vertical;
    min-height: 80px;
  }
  textarea:focus, input[type="password"]:focus, select:focus {
    border-color: var(--primary-light);
    outline: none;
  }
  button {
    background-color: var(--primary-light);
    border: none;
    color: white;
    padding: 12px 25px;
    margin: 10px 8px 20px 8px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s ease;
    user-select: none;
  }
  button:hover {
    background-color: var(--primary-dark);
  }
  #output {
    background-color: #ecf0f1;
    border-radius: 8px;
    padding: 15px;
    min-height: 80px;
    font-size: 1.3rem;
    white-space: pre-wrap;
    word-wrap: break-word;
    color: #2c3e50;
    user-select: all;
    margin-top: 10px;
  }
  body.dark #output {
    background-color: #2c2c2c;
    color: var(--color-dark);
  }
  .footer {
    margin-top: 30px;
    font-size: 0.9rem;
    color: #555;
    user-select: none;
  }
  body.dark .footer {
    color: #aaa;
  }
  .topbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }
  .topbar > * {
    flex: 1;
    max-width: 160px;
  }
  .theme-toggle {
    cursor: pointer;
    text-align: center;
    font-weight: 600;
  }
</style>
</head>
<body>
  <div class="container" role="main" aria-label="Secret message encryptor with emoji output and customization">
    <div class="topbar">
      <select id="langSelect" aria-label="Select Language">
        <option value="en" selected>English</option>
        <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
        <option value="or">à¬“à¬¡à¬¼à¬¿à¬†</option>
      </select>
      <select id="emojiSetSelect" aria-label="Select Emoji Set">
        <option value="default" selected>Default Emoji Set</option>
        <option value="smiley">Smiley Faces</option>
        <option value="animals">Animals</option>
      </select>
      <div class="theme-toggle" id="themeToggle" tabindex="0" role="button" aria-pressed="false" aria-label="Toggle Light/Dark Theme">ğŸŒ™ Dark Mode</div>
    </div>

    <h2 id="title">Secret Message</h2>

    <label for="message" id="labelMessage">Message (type or paste here):</label>
    <textarea id="message" placeholder="Type your message here..."></textarea>

    <label for="password" id="labelPassword">Password:</label>
    <input type="password" id="password" placeholder="Enter password" />

    <div>
      <button id="encryptBtn">Encrypt ğŸ”’</button>
      <button id="decryptBtn">Decrypt ğŸ”“</button>
      <button id="copyBtn">Copy Output ğŸ“‹</button>
    </div>

    <div id="output" aria-live="polite" role="region" tabindex="0"></div>

    <div class="footer" id="footerText">Crafted with â¤ï¸ by Gopinath</div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

  <script>
    const emojiSets = {
      default: [
        "ğŸ˜€","ğŸ˜","ğŸ˜‚","ğŸ¤£","ğŸ˜ƒ","ğŸ˜„","ğŸ˜…","ğŸ˜†",
        "ğŸ˜‰","ğŸ˜Š","ğŸ˜‹","ğŸ˜","ğŸ˜","ğŸ˜˜","ğŸ˜—","ğŸ˜™",
        "ğŸ˜š","ğŸ™‚","ğŸ¤—","ğŸ¤”","ğŸ˜","ğŸ˜‘","ğŸ˜¶","ğŸ™„",
        "ğŸ˜","ğŸ˜£","ğŸ˜¥","ğŸ˜®","ğŸ¤","ğŸ˜¯","ğŸ˜ª","ğŸ˜«",
        "ğŸ˜´","ğŸ˜Œ","ğŸ˜›","ğŸ˜œ","ğŸ˜","ğŸ¤¤","ğŸ˜’","ğŸ˜“",
        "ğŸ˜”","ğŸ˜•","ğŸ™ƒ","ğŸ¤‘","ğŸ˜²","â˜¹ï¸","ğŸ™","ğŸ˜–",
        "ğŸ˜","ğŸ˜Ÿ","ğŸ˜¤","ğŸ˜¢","ğŸ˜­","ğŸ˜¦","ğŸ˜§","ğŸ˜¨",
        "ğŸ˜©","ğŸ¤¯","ğŸ˜¬","ğŸ˜°","ğŸ˜±","ğŸ¥µ","ğŸ¥¶","ğŸ˜³"
      ],
      smiley: [
        "ğŸ˜€","ğŸ˜ƒ","ğŸ˜„","ğŸ˜","ğŸ˜†","ğŸ˜…","ğŸ˜‚","ğŸ¤£",
        "ğŸ˜Š","ğŸ˜‡","ğŸ™‚","ğŸ™ƒ","ğŸ˜‰","ğŸ˜Œ","ğŸ˜","ğŸ¥°",
        "ğŸ˜˜","ğŸ˜—","ğŸ˜™","ğŸ˜š","ğŸ˜‹","ğŸ˜›","ğŸ˜","ğŸ˜œ",
        "ğŸ¤ª","ğŸ¤¨","ğŸ§","ğŸ¤“","ğŸ˜","ğŸ¥³","ğŸ¤ ","ğŸ˜",
        "ğŸ˜’","ğŸ˜","ğŸ˜”","ğŸ˜Ÿ","ğŸ˜•","ğŸ™","â˜¹ï¸","ğŸ˜£",
        "ğŸ˜–","ğŸ˜«","ğŸ˜©","ğŸ¥º","ğŸ˜¢","ğŸ˜­","ğŸ˜¤","ğŸ˜ ",
        "ğŸ˜¡","ğŸ¤¬","ğŸ¤¯","ğŸ˜³","ğŸ¥µ","ğŸ¥¶","ğŸ˜±","ğŸ˜¨"
      ],
      animals: [
        "ğŸ¶","ğŸ±","ğŸ­","ğŸ¹","ğŸ°","ğŸ¦Š","ğŸ»","ğŸ¼",
        "ğŸ¨","ğŸ¯","ğŸ¦","ğŸ®","ğŸ·","ğŸ¸","ğŸµ","ğŸ”",
        "ğŸ§","ğŸ¦","ğŸ¤","ğŸ£","ğŸ¥","ğŸ¦†","ğŸ¦…","ğŸ¦‰",
        "ğŸ¦‡","ğŸº","ğŸ—","ğŸ´","ğŸ¦„","ğŸ","ğŸ›","ğŸ¦‹",
        "ğŸŒ","ğŸ","ğŸœ","ğŸ¦—","ğŸ•·ï¸","ğŸ¦‚","ğŸ¢","ğŸ",
        "ğŸ¦","ğŸ™","ğŸ¦‘","ğŸ¦","ğŸ¦€","ğŸ¡","ğŸ ","ğŸŸ"
      ]
    };

    const langData = {
      en: {
        title: "Secret Message",
        labelMessage: "Message (type or paste here):",
        labelPassword: "Password:",
        encrypt: "Encrypt ğŸ”’",
        decrypt: "Decrypt ğŸ”“",
        copy: "Copy Output ğŸ“‹",
        crafted: "Crafted with â¤ï¸ by Gopinath",
        alertNoMessage: "Please enter a message.",
        alertNoPassword: "Please enter a password.",
        alertNoEncrypted: "Please enter the encrypted emoji message.",
        alertIncorrectPassword: "Incorrect password or corrupted message.",
        alertEncryptionFailed: "Encryption failed.",
        alertDecryptionFailed: "Decryption failed.",
        alertCopied: "Output copied to clipboard!"
      },
      hi: {
        title: "à¤¸à¥€à¤•à¥à¤°à¥‡à¤Ÿ à¤®à¥ˆà¤¸à¥‡à¤œ",
        labelMessage: "à¤®à¥ˆà¤¸à¥‡à¤œ (à¤¯à¤¹à¤¾à¤‚ à¤Ÿà¤¾à¤‡à¤ª à¤¯à¤¾ à¤ªà¥‡à¤¸à¥à¤Ÿ à¤•à¤°à¥‡à¤‚):",
        labelPassword: "à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡:",
        encrypt: "à¤à¤¨à¤•à¥à¤°à¤¿à¤ªà¥à¤Ÿ ğŸ”’",
        decrypt: "à¤¡à¥€à¤•à¥à¤°à¤¿à¤ªà¥à¤Ÿ ğŸ”“",
        copy: "à¤•à¥‰à¤ªà¥€ à¤†à¤‰à¤Ÿà¤ªà¥à¤Ÿ ğŸ“‹",
        crafted: "à¤¦à¤¿à¤² à¤¸à¥‡ à¤¬à¤¨à¤¾à¤¯à¤¾ â¤ï¸ à¤—à¥‹à¤ªà¥€à¤¨à¤¾à¤¥ à¤¦à¥à¤µà¤¾à¤°à¤¾",
        alertNoMessage: "à¤•à¥ƒà¤ªà¤¯à¤¾ à¤®à¥ˆà¤¸à¥‡à¤œ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚à¥¤",
        alertNoPassword: "à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚à¥¤",
        alertNoEncrypted: "à¤•à¥ƒà¤ªà¤¯à¤¾ à¤à¤¨à¥à¤•à¥à¤°à¤¿à¤ªà¥à¤Ÿà¥‡à¤¡ à¤‡à¤®à¥‹à¤œà¥€ à¤®à¥ˆà¤¸à¥‡à¤œ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚à¥¤",
        alertIncorrectPassword: "à¤—à¤²à¤¤ à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡ à¤¯à¤¾ à¤®à¥ˆà¤¸à¥‡à¤œ à¤–à¤°à¤¾à¤¬ à¤¹à¥ˆà¥¤",
        alertEncryptionFailed: "à¤à¤¨à¤•à¥à¤°à¤¿à¤ªà¥à¤¶à¤¨ à¤…à¤¸à¤«à¤² à¤°à¤¹à¤¾à¥¤",
        alertDecryptionFailed: "à¤¡à¥€à¤•à¥à¤°à¤¿à¤ªà¥à¤¶à¤¨ à¤…à¤¸à¤«à¤² à¤°à¤¹à¤¾à¥¤",
        alertCopied: "à¤†à¤‰à¤Ÿà¤ªà¥à¤Ÿ à¤•à¥à¤²à¤¿à¤ªà¤¬à¥‹à¤°à¥à¤¡ à¤®à¥‡à¤‚ à¤•à¥‰à¤ªà¥€ à¤¹à¥‹ à¤—à¤¯à¤¾!"
      },
      or: {
        title: "à¬¸à¬¿à¬•à­à¬°à­‡à¬Ÿà­ à¬®à­‡à¬¸à­‡à¬œà­",
        labelMessage: "à¬®à­‡à¬¸à­‡à¬œà­ (à¬à¬ à¬¾à¬°à­‡ à¬Ÿà¬¾à¬‡à¬ªà­ à¬•à¬°à¬¨à­à¬¤à­ à¬•à¬¿à¬®à­à¬¬à¬¾ à¬ªà­‡à¬·à­à¬Ÿà­ à¬•à¬°à¬¨à­à¬¤à­):",
        labelPassword: "à¬ªà¬¾à¬¸à­±à¬¾à¬°à­à¬¡:",
        encrypt: "à¬‡à¬¨à­à¬•à­à¬°à¬¿à¬ªà­à¬Ÿà­ ğŸ”’",
        decrypt: "à¬¡à¬¿à¬•à­à¬°à¬¿à¬ªà­à¬Ÿà­ ğŸ”“",
        copy: "à¬¨à¬•à¬² à¬•à¬°à¬¨à­à¬¤à­ ğŸ“‹",
        crafted: "à¬ªà­à¬°à­‡à¬® à¬¸à¬¹à¬¿à¬¤ à¬¤à¬¿à¬†à¬°à¬¿ â¤ï¸ à¬—à­‹à¬ªà­€à¬¨à¬¾à¬¥à¬™à­à¬• à¬¦à­à­±à¬¾à¬°à¬¾",
        alertNoMessage: "à¬¦à­Ÿà¬¾à¬•à¬°à¬¿ à¬®à­‡à¬¸à­‡à¬œà­ à¬¦à¬¿à¬…à¬¨à­à¬¤à­à¥¤",
        alertNoPassword: "à¬¦à­Ÿà¬¾à¬•à¬°à¬¿ à¬ªà¬¾à¬¸à­±à¬¾à¬°à­à¬¡ à¬¦à¬¿à¬…à¬¨à­à¬¤à­à¥¤",
        alertNoEncrypted: "à¬¦à­Ÿà¬¾à¬•à¬°à¬¿ à¬‡à¬¨à­à¬•à­à¬°à¬¿à¬ªà­à¬Ÿà­ à¬‡à¬®à­‹à¬œà¬¿ à¬®à­‡à¬¸à­‡à¬œà­ à¬¦à¬¿à¬…à¬¨à­à¬¤à­à¥¤",
        alertIncorrectPassword: "à¬­à­à¬² à¬ªà¬¾à¬¸à­±à¬¾à¬°à­à¬¡ à¬•à¬¿à¬®à­à¬¬à¬¾ à¬®à­‡à¬¸à­‡à¬œà­ à¬–à¬°à¬¾à¬ª à¬…à¬Ÿà­‡à¥¤",
        alertEncryptionFailed: "à¬‡à¬¨à­à¬•à­à¬°à¬¿à¬ªà­à¬¸à¬¨à­ à¬…à¬¸à¬«à¬³ à¬¹à­‡à¬²à¬¾à¥¤",
        alertDecryptionFailed: "à¬¡à¬¿à¬•à­à¬°à¬¿à¬ªà­à¬¸à¬¨à­ à¬…à¬¸à¬«à¬³ à¬¹à­‡à¬²à¬¾à¥¤",
        alertCopied: "à¬†à¬‰à¬Ÿà¬ªà­à¬Ÿà­ à¬•à­à¬²à¬¿à¬ªà­ à¬¬à­‹à¬°à­à¬¡à¬•à­ à¬•à¬ªà¬¿ à¬¹à­‹à¬‡à¬—à¬²à¬¾!"
      }
    };

    let currentLang = 'en';
    let currentEmojiSet = 'default';

    const messageEl = document.getElementById('message');
    const passwordEl = document.getElementById('password');
    const outputEl = document.getElementById('output');
    const langSelect = document.getElementById('langSelect');
    const emojiSetSelect = document.getElementById('emojiSetSelect');
    const themeToggle = document.getElementById('themeToggle');

    function updateLanguage() {
      const d = langData[currentLang];
      document.getElementById('title').textContent = d.title;
      document.getElementById('labelMessage').textContent = d.labelMessage;
      document.getElementById('labelPassword').textContent = d.labelPassword;
      document.getElementById('encryptBtn').textContent = d.encrypt;
      document.getElementById('decryptBtn').textContent = d.decrypt;
      document.getElementById('copyBtn').textContent = d.copy;
      document.getElementById('footerText').textContent = d.crafted;
    }

    langSelect.addEventListener('change', () => {
      currentLang = langSelect.value;
      updateLanguage();
      clearAll();
    });

    emojiSetSelect.addEventListener('change', () => {
      currentEmojiSet = emojiSetSelect.value;
      clearAll();
    });

    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      const isDark = document.body.classList.contains('dark');
      themeToggle.setAttribute('aria-pressed', isDark);
      themeToggle.textContent = isDark ? 'â˜€ï¸ Light Mode' : 'ğŸŒ™ Dark Mode';
    });

    function base64ToEmoji(base64Str) {
      const emojiChars = emojiSets[currentEmojiSet];
      let result = "";
      for (let ch of base64Str) {
        if (ch === "=") continue;
        const idx = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(ch);
        if (idx === -1) continue;
        result += emojiChars[idx];
      }
      return result;
    }

    function emojiToBase64(emojiStr) {
      const emojiChars = emojiSets[currentEmojiSet];
      let result = "";
      for (let ch of emojiStr) {
        const idx = emojiChars.indexOf(ch);
        if (idx === -1) continue;
        result += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(idx);
      }
      while (result.length % 4 !== 0) result += "=";
      return result;
    }

    function encryptMessage() {
      const msg = messageEl.value;
      const pwd = passwordEl.value;
      const d = langData[currentLang];

      if (!msg) {
        alert(d.alertNoMessage);
        return;
      }
      if (!pwd) {
        alert(d.alertNoPassword);
        return;
      }

      try {
        const encrypted = CryptoJS.AES.encrypt(msg, pwd).toString();
        const emojiEncoded = base64ToEmoji(encrypted);
        outputEl.textContent = emojiEncoded;
      } catch {
        alert(d.alertEncryptionFailed);
        outputEl.textContent = "";
      }
    }

    function decryptMessage() {
      const emojiEncrypted = messageEl.value;
      const pwd = passwordEl.value;
      const d = langData[currentLang];

      if (!emojiEncrypted) {
        alert(d.alertNoEncrypted);
        return;
      }
      if (!pwd) {
        alert(d.alertNoPassword);
        return;
      }

      try {
        const base64Str = emojiToBase64(emojiEncrypted);
        const bytes = CryptoJS.AES.decrypt(base64Str, pwd);
        const decrypted = bytes.toString(CryptoJS.enc.Utf8);
        if (!decrypted) {
          alert(d.alertIncorrectPassword);
          outputEl.textContent = "";
        } else {
          outputEl.textContent = decrypted;
        }
      } catch {
        alert(d.alertDecryptionFailed);
        outputEl.textContent = "";
      }
    }

    document.getElementById('encryptBtn').addEventListener('click', encryptMessage);
    document.getElementById('decryptBtn').addEventListener('click', decryptMessage);
    document.getElementById('copyBtn').addEventListener('click', () => {
      if (!outputEl.textContent) return alert(langData[currentLang].alertNoMessage);
      navigator.clipboard.writeText(outputEl.textContent)
        .then(() => alert(langData[currentLang].alertCopied))
        .catch(() => alert('Clipboard copy failed'));
    });

    function clearAll() {
      messageEl.value = "";
      passwordEl.value = "";
      outputEl.textContent = "";
    }

    updateLanguage();
  </script>
</body>
</html>
