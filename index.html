<!DOCTYPE html>
<html>
<head>
    <title>Emoji Secret Message</title>
</head>
<body>
    <h2>Emoji Secret Message Encryptor/Decryptor</h2>

    <label>Message (type or paste here):</label><br>
    <textarea id="message" rows="4" cols="40" placeholder="Yahan apna message likho ya encrypted emoji yahan paste karo..."></textarea><br><br>

    <input type="password" id="password" placeholder="Password daalo"><br><br>

    <button onclick="encryptMessage()">Encrypt</button>
    <button onclick="decryptMessage()">Decrypt</button><br><br>

    <label>Output:</label><br>
    <textarea id="output" rows="4" cols="40" readonly style="background-color:#f0f0f0;"></textarea>

<script>
    const emojis = ['😀','😁','😂','🤣','😃','😄','😅','😆','😉','😊','😋','😎','😍','😘','😗','😙','😚','🙂','🤗','🤔','😐','😑','😶','🙄','😏'];

    // Function to calculate shift value based on password characters
    function calculateShift(pwd) {
        let sum = 0;
        for (let i = 0; i < pwd.length; i++) {
            sum += pwd.charCodeAt(i);
        }
        return sum % 26;  // Shift within 0-25 range
    }

    function encryptMessage() {
        let msg = document.getElementById('message').value.toLowerCase();
        let pwd = document.getElementById('password').value;
        if (!pwd) {
            alert('Password zaroori hai!');
            return;
        }
        let shift = calculateShift(pwd);
        let encrypted = '';
        for (let ch of msg) {
            let code = ch.charCodeAt(0);
            if (code >= 97 && code <= 122) { // a-z
                let idx = code - 97;
                let shiftedIdx = (idx + shift) % 26;
                encrypted += emojis[shiftedIdx];
            } else if (ch === ' ') {
                encrypted += ' ';
            } else {
                encrypted += ch; // punctuation, numbers as is
            }
        }
        document.getElementById('output').value = encrypted;
    }

    function decryptMessage() {
        let encrypted = document.getElementById('message').value;
        let pwd = document.getElementById('password').value;
        if (!pwd) {
            alert('Password zaroori hai!');
            return;
        }
        let shift = calculateShift(pwd);
        let decrypted = '';
        for (let ch of encrypted) {
            let idx = emojis.indexOf(ch);
            if (idx !== -1) {
                let shiftedIdx = (idx - shift + 26) % 26;
                decrypted += String.fromCharCode(shiftedIdx + 97);
            } else {
                decrypted += ch;
            }
        }
        document.getElementById('output').value = decrypted;
    }
</script>
</body>
</html>
