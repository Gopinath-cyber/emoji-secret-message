<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emoji Cone Bounce Animation</title>
<style>
  body {
    margin: 0; padding: 0;
    overflow: hidden;
    background: #f0f4f8;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    position: relative;
    height: 100vh;
  }
  #container {
    position: relative;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    background: #f0f4f8;
  }
  .emoji {
    position: absolute;
    font-size: 28px;
    user-select: none;
    will-change: transform, left, top;
  }
</style>
</head>
<body>
  <div id="container"></div>

<script>
  const container = document.getElementById('container');

  // Emoji set
  const emojis = ["😀","😁","😂","🤣","😃","😄","😅","😆","😉","😊"];

  const totalEmojis = 15;

  // Cone parameters (triangle area)
  // Apex at top center, base at bottom full width
  // y from 0 to container height, x from center expanding outward as y increases
  const width = window.innerWidth;
  const height = window.innerHeight;
  const apexX = width / 2;
  const apexY = 0;

  // Emoji objects with properties: element, progress (0 to 1), direction (1 or -1)
  let emojiObjs = [];

  // Create emoji elements and initialize
  for (let i = 0; i < totalEmojis; i++) {
    const span = document.createElement('span');
    span.className = 'emoji';
    span.textContent = emojis[i % emojis.length];
    container.appendChild(span);

    // Start progress staggered so emojis spread along path
    const startProgress = i / totalEmojis * 0.7; // 0 to 0.7 spread on downward path

    emojiObjs.push({
      el: span,
      progress: startProgress,
      direction: 1, // 1 = going down cone, -1 = going back up
      bounceOffset: 0,
      bounceSpeed: 0.005 + Math.random() * 0.007,
      bounceHeight: 15 + Math.random() * 10,
      delay: i * 100 // delay to stagger bounce
    });
  }

  function coneX(progress, y) {
    // Given progress (0 to 1) and y, calculate x inside cone triangle
    // At apex (y=0), x = apexX
    // At base (y=height), max horizontal offset from apexX = maxOffset
    const maxOffset = width / 2 * (y / height);
    // progress along horizontal axis -0.5 to 0.5 (centered)
    let horizontalProgress = progress - 0.5;
    return apexX + horizontalProgress * maxOffset * 2; // multiply by 2 because range -0.5 to 0.5
  }

  function update() {
    emojiObjs.forEach((emoji, idx) => {
      // Update progress by direction
      emoji.progress += 0.002 * emoji.direction;

      if (emoji.progress > 1) {
        emoji.progress = 1;
        emoji.direction = -1; // reverse direction
      } else if (emoji.progress < 0) {
        emoji.progress = 0;
        emoji.direction = 1;
      }

      // Calculate y from progress (0 top, 1 bottom)
      const y = emoji.progress * height;

      // Calculate x inside cone, spread horizontally
      const x = coneX(emoji.progress, y);

      // Bounce effect near bottom-right corner (x ~ width, y ~ height)
      // Let's make bounce start when emoji is near right corner area (x > width*0.75 && y > height*0.8)
      let bounce = 0;
      if (emoji.progress > 0.8) {
        bounce = Math.sin((performance.now() * 0.01 + emoji.delay) * 3) * emoji.bounceHeight;
      }

      // Set position with bounce offset vertically
      emoji.el.style.left = `${x}px`;
      emoji.el.style.top = `${y + bounce}px`;
    });

    requestAnimationFrame(update);
  }

  update();

  // Resize handler
  window.addEventListener('resize', () => {
    // Update width and height on resize
    width = window.innerWidth;
    height = window.innerHeight;
  });
</script>
</body>
</html>
